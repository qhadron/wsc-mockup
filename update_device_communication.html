<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
	<![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
	<!--<![endif]-->

	<head>
		<meta charset="utf-8">
		<!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
				wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
		<title>99ZZ204 Devices, Communications - HYDEX Update
		</title>
		<meta content="width=device-width,initial-scale=1" name="viewport">
		<!-- Meta data -->
		<meta name="description" content="Web Experience Toolkit (WET) includes reusable components for building and maintaining innovative Web sites that are accessible, usable, and interoperable. These reusable components are open source software and free for use by departments and external Web communities">
		<meta name="dcterms.title" content="Information to update:">
		<meta name="dcterms.creator" content="French name of the content author / Nom en français de l'auteur du contenu">
		<meta name="dcterms.issued" title="W3CDTF" content="Date published (YYYY-MM-DD) / Date de publication (AAAA-MM-JJ)">
		<meta name="dcterms.modified" title="W3CDTF" content="Date modified (YYYY-MM-DD) / Date de modification (AAAA-MM-JJ)">
		<meta name="dcterms.subject" title="scheme" content="French subject terms / Termes de sujet en français">
		<meta name="dcterms.language" title="ISO639-2" content="eng">
		<!-- Meta data-->
		<!--[if gte IE 9 | !IE ]><!-->
		<link href="./theme-gc-intranet/assets/favicon.ico" rel="icon" type="image/x-icon">
		<link rel="stylesheet" href="theme-gc-intranet/css/theme.css">
		<!--<![endif]-->
		<!--[if lt IE 9]>
			<link href="./theme-gc-intranet/assets/favicon.ico" rel="shortcut icon" />
			<link rel="stylesheet" href="./theme-gc-intranet/css/ie8-theme.min.css" />
			<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
			<script src="./wet-boew/js/ie8-wet-boew.min.js"></script>
			<![endif]-->
		<noscript>
				<link rel="stylesheet" href="./wet-boew/css/noscript.min.css" />
			</noscript>
	</head>

	<body vocab="http://schema.org/" typeof="WebPage">
		<ul id="wb-tphp">
			<li class="wb-slc">
				<a class="wb-sl" href="#wb-cont">Skip to main content</a>
			</li>
			<li class="wb-slc visible-sm visible-md visible-lg">
				<a class="wb-sl" href="#wb-info">Skip to "About this site"</a>
			</li>
			<li class="wb-slc visible-md visible-lg">
				<a class="wb-sl" href="#wb-sec">Skip to section menu</a>
			</li>
		</ul>
		<header role="banner">
			<div id="wb-bnr">
				<div id="wb-bar">
					<div class="container">
						<div class="row">
							<object id="gcwu-sig" type="image/svg+xml" tabindex="-1" role="img" data="./theme-gc-intranet/assets/sig-blk-en.svg" aria-label="Government of Canada"></object>
							<section id="wb-lng">
								<h2>Language selection</h2>
								<ul class="list-inline">
									<li><a lang="fr" href="content-secmenu-fr.html">Français</a></li>
								</ul>
							</section>
							<section class="wb-mb-links col-xs-12 visible-sm visible-xs" id="wb-glb-mn">
								<h2>Search and menus</h2>
								<ul class="pnl-btn list-inline text-right">
									<li><a href="#mb-pnl" title="Search and menus" aria-controls="mb-pnl" class="overlay-lnk btn btn-sm btn-default" role="button"><span class="glyphicon glyphicon-search"><span class="glyphicon glyphicon-th-list"><span class="wb-inv">Search and menus</span></span></span></a></li>
								</ul>
								<div id="mb-pnl"></div>
							</section>
						</div>
					</div>
				</div>
				<div class="container">
					<div class="row">
						<div id="wb-sttl" class="col-md-12">
							<a href="http://wet-boew.github.io/v4.0-ci/index-en.html">
								<span>Water Survey of Canada HYDEX data update</span>
							</a>
							<object id="wmms" type="image/svg+xml" tabindex="-1" role="img" data="./theme-gc-intranet/assets/wmms-intra.svg" aria-label="Symbol of the Government of Canada"></object>
						</div>
					</div>
				</div>
			</div>
			<nav role="navigation" id="wb-sm" data-ajax-replace="./ajax/sitemenu-loggedin.html" data-trgt="mb-pnl" class="wb-menu visible-md visible-lg" typeof="SiteNavigationElement">
				<div class="container nvbar">
					<h2>Topics menu</h2>
					<div class="row">
						<ul class="list-inline menu">
							<li><a>HYDEX Reports</a></li>
							<li><a>HYDEX update</a></li>
							<li><a>HYDEX Administration</a></li>
						</ul>
					</div>
				</div>
			</nav>
			<nav role="navigation" id="wb-bc" property="breadcrumb" data-ajax-replace="ajax/update-breadcrumb.html">
				<h2>You are here:</h2>
				<div class="container">
					<div class="row">
						<ol class="breadcrumb">
							<li>
								<a href="http://wet-boew.github.io/v4.0-ci/index-en.html">HYDEX</a>
							</li>
							<li>
								<a href="http://wet-boew.github.io/v4.0-ci/demos/index-en.html">Search results</a>
							</li>
							<li>
								Update HYDEX
							</li>
						</ol>
					</div>
				</div>
			</nav>
		</header>
		<div data-ajax-replace="ajax/login-info.html"></div>
		<main role="main" property="mainContentOfPage" class="container">
			<h1 id="wb-cont" property="name">HYDEX update information 99ZZ204</h1>
			<section>
				<div data-ajax-replace="ajax/update-header.html"></div>
			</section>
			<form action="#" class="form-horizontal">
				<template id="device-template">
					<details open="open">
						<summary>
							<h2 class="device-title">New Device</h2>
							<div class="enable pull-right btn btn-danger" style="transform: translateY(-4px)" onclick="this.parentElement.parentElement.remove()">
								<span class="glyphicon glyphicon-trash"></span>
							</div>
						</summary>
	
					<history-tab generated>
						<div class="panel panel-default info-panel">
							<header class="panel-heading">
								<h6 class="panel-title">Device Information
								</h6>
							</header>
							<div class="panel-body">
								<div class="form-group">
									<label for="data4" class="col-sm-4 control-label model-label required">Category</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .category-option">
												<option value="1">Option&#32;1</option>
												<option value="2">Option&#32;2</option>
												<option value="3">Option&#32;3</option>
												<option value="4">Option&#32;4</option>
											</select>
									</div>
								</div>
								<div class="form-group">
									<label for="data4" class="col-sm-4 control-label model-label required">Make</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .make-option">
											<option value="1">Option&#32;1</option>
											<option value="2">Option&#32;2</option>
											<option value="3">Option&#32;3</option>
											<option value="4">Option&#32;4</option>
										</select>
									</div>
								</div>
								<div class="form-group">
									<label for="data4" class="col-sm-4 control-label model-label required">Model</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .model-option">
											<option value="1">Option&#32;1</option>
											<option value="2">Option&#32;2</option>
											<option value="3">Option&#32;3</option>
											<option value="4">Option&#32;4</option>
										</select>
									</div>
								</div>
								<div class="form-group">
									<label for="" class="col-sm-4 control-label model-label required">Serial Number</label>
									<div class="col-sm-8">
										<input type="text" class="form-control">
									</div>
								</div>
								<div class="form-group">
									<label for="data1" class="col-sm-4 control-label">Firmware Version</label>
									<div class="col-sm-8">
										<input type="text" id="data1" name="data1" class="form-control">
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-4 control-label">
										<label for="data4" class="required">Qualified Device</label>
										<div>
											<code>Note: this is a new field</code>
										</div>
									</div>
									<div class="col-sm-8">
										<select name="data4" id="data4" class="form-control">
									<option value="1">Yes</option>
									<option value="2">No</option>
								</select>
									</div>
								</div>
							</div>
						</div>
	
						<div class="panel panel-default funding-panel">
							<header class="panel-heading">
								<h6 class="panel-title">Funding Information</h6>
							</header>
							<div class="panel-body">
								<div class="row">
									<div class="col-sm-4 form-group">
										<label class="col-sm-4 control-label">Purchase Cost</label>
										<div class="col-sm-8"><input type="number" class="form-control "></div>
									</div>
									<div class="col-sm-4 form-group">
										<label class="col-sm-4 control-label">Purchase Date</label>
										<div class="col-sm-8"><input type="date" class="form-control "></div>
									</div>
									<div class="col-sm-4 form-group">
										<label class="col-sm-4 control-label">Life Expectancy</label>
										<div class="col-sm-8"><input type="number" class="form-control "></div>
									</div>
								</div>
								
								<hr>
								
								<div class="form-group">
										<label class="col-sm-4 control-label">Operating Agency</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .agency-option"></select>
									</div>
								</div>
								<div class="form-group">
										<label class="col-sm-4 control-label">Owining Agency</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .agency-option"></select>
									</div>
								</div>
								<div class="form-group">
										<label class="col-sm-4 control-label">Funding Agency</label>
									<div class="col-sm-8">
										<select class="form-control" data-ajax-replace="ajax/update-device-data.html .agency-option"></select>
									</div>
								</div>
							</div>
						</div>
						
						<div class="panel panel-default status-panel">
							<header class="panel-heading">
								<h6 class="panel-title">Status</h6>
							</header>
							<div class="panel-body">
								<div class="form-group">
									<label class="col-sm-4 control-label required">Status</label>
									<div class="col-sm-8">
										<select class="form-control device-status-select" style="display: inline;">
											<option selected>ACTIVE</option>
											<option>INACTIVE</option>
											<option>REMOVED</option>
										</select>
									</div>
								</div>
								<div class="form-group">
										<label class="col-sm-4 control-label required">Deployment Status</label>
									<div class="col-sm-8">
										<select class="form-control deployment-status-select">
											<option class="other-option">DEPLOYED</option>
											<option class="removed-option" style="display: none;">DEPLOYABLE</option>
											<option class="removed-option" style="display: none;">NON-DEPLOYABLE</option>
											<option class="removed-option" style="display: none;">DESTROYED</option>
										</select>
									</div>
								</div>
								<div class="station-move-container hidden">
									<div class="panel panel-default">
										<header class="panel-heading"><h6 class="panel-title"> Move Device </h6></header>
										<div class="panel-body">
											<div class="form-group">
												<label for="station_id" class="col-sm-4 control-label required"><span class="field-name">Destination Location</span></label>
												<div class="col-sm-8">
													<input type="text" id="station_id" list="station-id-suggestions" class="form-control" required="required">
													<datalist id="station-id-suggestions" data-ajax-append="ajax/update-station-list.html">
													</datalist>
													<code>(should be validated)</code>
												</div>
											</div>
											<div class="form-group">
													<label class="col-sm-4 control-label required">Destination Status</label>
												<div class="col-sm-8">
													<select class="form-control device-status-select">
														<option class="other-option">ACTIVE</option>
														<option class="other-option">INACTIVE</option>
														<option>SHELVED</option>
													</select>
												</div>
											</div>
											<div class="form-group">
													<label class="col-sm-4 control-label required">Destination Deployment Status</label>
												<div class="col-sm-8">
													<select class="form-control deployment-status-select" disabled="disabled">
														<option class="other-option">DEPLOYED</option>
														<option class="shelved-option">SHELVED DEPLOYABLE</option>
														<option class="shelved-option">SHELVED NON-DEPLOYABLE</option>
													</select>
												</div>
											</div>
										</div>
									</div>
								</div>
								<script type="text/javascript">
								(function () {
									const parent = Array.from(document.querySelectorAll('.status-panel > .panel-body')).pop();
									const deploymentStatus = parent.querySelector('.deployment-status-select');
									const removedOptions = Array.from(deploymentStatus.querySelectorAll('.removed-option'));
									const otherOptions = Array.from(deploymentStatus.querySelectorAll('.other-option'));
									const stationMoveContainer = parent.querySelector('.station-move-container');
									
									function checkChanges () {
										const val = parent.querySelector('.device-status-select').value;
										if (val === "REMOVED") {
											otherOptions.forEach(elem => elem.style.display = 'none');
											removedOptions.forEach(elem => elem.style.display = '');
										} else {
											removedOptions.forEach(elem => elem.style.display = 'none');
											otherOptions.forEach(elem => elem.style.display = '');
										}
										if (val === "REMOVED" && deploymentStatus.value != "DESTROYED") {
											stationMoveContainer.classList.remove('hidden');
										} else {
											stationMoveContainer.classList.add('hidden');
										}
										let availableOptions = Array.from(deploymentStatus.options).filter(x => x.style.display != "none");
										let value = availableOptions.find(x => x.value === deploymentStatus.value);
										if (!value) {
											deploymentStatus.value = availableOptions[0].value;	
										}
									}
									
									parent.querySelector('.device-status-select')
									.addEventListener('change',checkChanges);
									
									parent.querySelector('.station-move-container .device-status-select')
									.addEventListener('change', e => {
										const val = e.target.value;
										if (val === "SHELVED") {
											Array.from(parent.querySelector('.station-move-container .deployment-status-select')
												.querySelectorAll('.shelved-option'))
											.forEach(elem => elem.style.display = '');
											Array.from(parent.querySelector('.station-move-container .deployment-status-select')
												.querySelectorAll('.other-option'))
											.forEach(elem => elem.style.display = 'none');
											parent.querySelector('.station-move-container .deployment-status-select')
												.value = `SHELVED ${deploymentStatus.value}`;
										} else {
											Array.from(parent.querySelector('.station-move-container .deployment-status-select')
												.querySelectorAll('.other-option'))
											.forEach(elem => elem.style.display = '');
											Array.from(parent.querySelector('.station-move-container .deployment-status-select')
												.querySelectorAll('.shelved-option'))
											.forEach(elem => elem.style.display = 'none');
											parent.querySelector('.station-move-container .deployment-status-select')
												.value = `DEPLOYED`;
										}
									});
									
									deploymentStatus.addEventListener('change', e => {
										checkChanges();
										if (parent.querySelector('.station-move-container .device-status-select').value === "SHELVED") {
											parent.querySelector('.station-move-container .deployment-status-select')
												.value = `SHELVED ${deploymentStatus.value}`;
										}
									});
								})();
								</script>
							</div>
						</div>
	
						<div class="panel panel-default communication-panel">
							<header class="panel-heading">
								<h6 class="panel-title">
									Communication Information
								</h6>
							</header>	
							
							<div class="panel-body">
								<code>
									Here's a bunch of fields!
								</code>
							</div>
						</div>
						
						<div class="form-group" effective-date></div>
						<div class="form-group" remark remark-label></div>
						
					</history-tab>
					</details>
				</template>

				<div id="devices"></div>

				<div class="form-group">
					<button class="pull-right btn btn-primary" id="add-device-button">Add Device</button>
				</div>

				<script type="text/javascript">
					(function () {
						'use strict';
						const template = document.getElementById('device-template');
						const container = document.getElementById('devices');

						function getClone() {
							return document.importNode(template.content, true);
						}

						async function addTemplate(clone) {
							container.appendChild(clone ? clone : getClone());
							await populateCustomElems();
							return container.lastElementChild;
						}

						document.getElementById('add-device-button').addEventListener('click', e => {
							e.preventDefault();
							addTemplate();
						});

						window.addEventListener('load', e => {
							(async function () {
								let clone = getClone();
								clone.querySelector('summary .btn').remove();
								clone.querySelector('history-tab').removeAttribute('generated');

								clone = await addTemplate(clone);
								const title = clone.querySelector('.device-title');
								title.textContent = `Amasser 063-1`;
								let cnt = 0;
								for (let e of clone.querySelectorAll('.info-panel select, .info-panel input'))
									e.disabled = !(++cnt === 5 || cnt === 6);

								for (let e of clone.querySelectorAll('.info-panel input[type="text"]'))
									e.value = randInt(1000000, 1);

								for (let e of clone.querySelectorAll('.funding-panel input'))
									e.value = randInt(1000, 1);

								clone.querySelector('.funding-panel input[type="date"]').value = new Date().toISOString().slice(0, 10);

							})();
						});

					})();
				</script>

				<div class="form-group" data-ajax-replace="ajax/submit-button.html"></div>
			</form>
			<dl id="wb-dtmd">
				<dt>Date modified:&#32;</dt>
				<dd><time property="dateModified">2014-02-19</time></dd>
			</dl>
		</main>
		<dl id="wb-dtmd">
			<dt>Date modified:&#32;</dt>
			<dd><time property="dateModified">2017-06-16</time></dd>
		</dl>
		</main>
		<footer role="contentinfo" id="wb-info" class="visible-sm visible-md visible-lg wb-navcurr">
			<div class="container">
				<nav role="navigation" class="row">
					<h2>About this site</h2>
					<section class="col-sm-3">
						<h3>Contact us</h3>
						<ul class="list-unstyled">
							<li><a href="https://watersurveyofcanada.atlassian.net/servicedesk/customer/portal/2">Questions or comments?</a></li>
						</ul>
					</section>
					<section class="col-sm-3">
						<h3>About</h3>
						<ul class="list-unstyled">
							<li><a href="">HYDEX user documentation in ecollab</a></li>
							<li><a href="">HYDEX requirements document in ecollab</a></li>
						</ul>
					</section>
					<section class="col-sm-3">
						<h3>Public Sites</h3>
						<ul class="list-unstyled">
							<li><a href="https://www.ec.gc.ca/rhc-wsc/">Water Survey of Canada</a></li>
						</ul>
					</section>
				</nav>
			</div>
		</footer>
		<!--[if gte IE 9 | !IE ]><!-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
		<script src="./wet-boew/js/wet-boew.min.js"></script>
		<script src="custom-elems.js"></script>
		<!--<![endif]-->
		<!--[if lt IE 9]>
			<script src="./wet-boew/js/ie8-wet-boew2.min.js"></script>
			<![endif]-->
	</body>

</html>
